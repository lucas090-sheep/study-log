# Nginx 기반 서버 연결 구조 설명

## ✅ 개요
이 문서는 웹 애플리케이션에서 흔히 사용되는 **Nginx + 웹 애플리케이션 서버 (예: Flask) + 데이터베이스 (예: MongoDB)** 구조를 설명합니다.  
Nginx는 웹 서버이자 리버스 프록시 서버로 동작하며, 클라이언트 요청을 효과적으로 분산하고 처리하는 핵심 구성 요소입니다.


## ✅ 전체 구성 흐름
```
클라이언트 (웹 브라우저)

↓

[ Nginx 서버 ]
정적 파일 제공 & 리버스 프록시

↓

[ 웹 애플리케이션 서버 (Flask, Node.js 등) ]

↓

[ 데이터베이스 (MongoDB, MySQL 등) ]
```

## ✅ 구성 요소별 설명

### 1. 클라이언트 (Client)
- 사용자 측의 웹 브라우저 또는 앱입니다.
- 웹 애플리케이션에 HTTP 요청을 보냅니다 (예: 페이지 접속, 데이터 전송).

### 2. Nginx (엔진엑스) - 웹 서버 & 리버스 프록시
- 고성능의 웹 서버이며, 두 가지 주요 역할을 수행합니다:

#### 🧩 정적 파일 서버
- HTML, CSS, JavaScript, 이미지 같은 파일을 클라이언트에게 빠르게 전달합니다.
- 서버 부담을 줄이기 위해 동적 백엔드 서버 대신 Nginx가 직접 처리합니다.

#### 🧩 리버스 프록시 (Reverse Proxy)
- 클라이언트의 요청을 **웹 애플리케이션 서버**로 전달합니다.
- 보안상 클라이언트가 직접 백엔드 서버에 접근하지 못하게 막아줍니다.
- 부하 분산, SSL 종료, 로드 밸런싱 등 다양한 기능을 제공합니다.

### 3. 웹 애플리케이션 서버 (Flask, Django, Express 등)
- 실제 비즈니스 로직이 처리되는 곳입니다.
- 클라이언트가 보낸 요청을 해석하고 처리한 후, 결과를 다시 Nginx를 통해 클라이언트에 전달합니다.
- 예: 회원가입, 로그인, 메모 저장 등

### 4. 데이터베이스 (MongoDB, MySQL 등)
- 사용자 데이터, 게시물, 메모 등 영속적으로 저장이 필요한 데이터를 관리합니다.
- 웹 애플리케이션 서버가 직접 DB와 통신하여 데이터를 삽입, 조회, 수정, 삭제합니다.

---

## ✅ 리버스 프록시란?

### 🔁 리버스 프록시 정의
- 클라이언트 요청을 **백엔드 서버로 전달하고**, 백엔드 응답을 다시 클라이언트에게 전달하는 중간 서버입니다.
- 클라이언트는 오직 프록시 서버(Nginx)만 알고, 실제 서버의 존재는 알지 못합니다.

### 🔐 리버스 프록시의 장점
- 백엔드 서버 보호 (보안)
- 정적 리소스 최적 처리 (성능)
- HTTPS 처리를 프록시에서 종료 (SSL 종료)
- 여러 서버에 요청 분산 가능 (로드 밸런싱)

---

## ✅ 포트 역할 요약

| 포트 번호 | 설명                         |
|-----------|------------------------------|
| 80        | Nginx가 수신하는 기본 HTTP 포트 |
| 443       | HTTPS 요청용 포트 (SSL 사용 시) |
| 5000      | Flask 서버 등 백엔드 서버 포트 |
| 27017     | MongoDB 기본 포트             |

---

## ✅ 통신 예시 (일반적인 흐름)
1. 사용자가 브라우저에서 `http://example.com` 접속
2. Nginx가 요청을 받아 HTML, CSS 파일 제공
3. JavaScript를 통해 추가 요청을 API 경로로 전송 (예: `/api/data`)
4. Nginx는 이 요청을 Flask 서버(5000번 포트)로 전달
5. Flask는 데이터베이스에서 필요한 데이터를 조회
6. 결과를 Nginx로 반환 → Nginx가 브라우저에 응답

---

## ✅ 결론

- Nginx는 웹 애플리케이션 아키텍처에서 핵심적인 허브 역할을 합니다.
- 정적 파일과 동적 요청을 분리하여 처리함으로써 **보안, 성능, 유지보수성**이 향상됩니다.
- 실제 서비스 환경에서는 거의 필수적으로 사용되는 구성입니다.
